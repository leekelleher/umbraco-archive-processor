# version format
version: 1.0.{build}

# set clone depth
clone_depth: 5

environment:
  access_token:
    secure: pEozEGTqJutQwOidJU6BTB+Ix0NV4vrUnomhfeqheVz4RNwfxjEYLoqR4XabhlPz

# build Configuration, i.e. Debug, Release, etc.
configuration: Release

build:
  project: src\UmbracoArchiveProcessor.sln
  verbosity: minimal

# scripts to run before build
before_build:
  nuget restore src\UmbracoArchiveProcessor.sln
  
# scripts to run after build
after_build:
  cmd: src\UmbracoArchiveProcessor\bin\Release\uap.exe

# to disable automatic tests 
test: off

artifacts:
  - path: artifacts\**\*

on_success:
  - git config --global credential.helper store
  - ps: Add-Content "$env:USERPROFILE\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.com`n"
  - git config --global user.email "leekelleher@gmail.com"
  - git config --global user.name "leekelleher"
  - git add data/releases.json
  - git commit -m "Updated releases.config [skip ci]"
  - git push origin master
